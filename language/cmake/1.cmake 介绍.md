### cmake 介绍
> cmake是一个跨平台的开源的构建工具,cmake 支持使用不同的编译工具进行编译,通过使用 CMakeLists.txt文件来描述项目的配置
> 从而使得项目的构建更加清晰和可维护性。cmake 支持 c、cpp、fortran 等多种语言，从而生成当前系统的编译器的构建文件: Makefile
> 

### cpp项目构建方式
* makefile方式
  * 构建流程
    * 根据项目需求通过makefile语法编写 makefile 文件
    * 使用 make 命令进行构建
  * 特点
    * 优点
      * 直接: 直接表达了编译、链接的步骤
      * 灵活: 手动控制 makefile 语法内容，精准控制
      * 有 make 工具标准构建工具支持
    * 缺点
      * 同一个文件无法跨平台，需要针对不同的平台编写 makefile 语句支持
      * 手动维护依赖，容易出错
  
* cmake方式
  * 构建流程
    * 根据项目需求通过编写 CMakeLists.txt完成项目构建流程定义
    * 通过 cmake 命令生成当前平台下的 Makefile 文件
    * 然后通过 make 构建或者 cmake --build进行构建
  * 特点
    * 优点
      * 跨平台，同一份 CMakeLists.txt文件可以在不同的系统下生成对应的构建文件
      * 自动管理依赖，减少开发者手动管理，避免出错
      * Cmake 支持模块化设计，构建大型项目更清晰、灵活，可维护度更高

* 对比

| 类别       | 易用性                         | 跨平台 | 可维护性                      |
|----------|-----------------------------|-----|---------------------------|
| Makefile | 简单、直接、容易理解，需要手动编写和管理        | 不支持 | 手动维护，容易出错                 |
| Cmake    | 复杂，使用高级语法和模块化设计，项目配置更灵活     | 支持  | 模块化设计和自动管理依赖，构建大型项目更容易和管理 |


### C/C++程序的编译过程
- 预编译处理
  - 处理头文件内容展开
  - 替换宏定义命令内容
  - 处理条件编译指令，根据编译条件，过滤不用的代码片段
- 编译器前端
  - 词法分析：将源代码分割成 Token，如关键词、标识符、运算符等
  - 语法分析：构建抽象语法树，用来标识源代码的结构
  - 抽象语法树
  - 语义分析：分析源代码在语义上是否合理，进行类型检查或类型推断，处理符号表等
- 编译器后端
  - 中间代码生成：将抽象语法树转换为中间代码
  - 代码优化器：对中间代码进行优化，提高代码性能
  - 代码生成器：将优化后的代码生成目标机器的汇编代码
  - 目标代码生成：生成目标机器代码，包括寄存器分配、指令选择等
- 汇编
  - 把汇编语言代码翻译成目标机器指令的过程
- 链接
  - 由汇编生成的目标文件无法立即执行，需要链接引用的外部库文件
  - 链接分静态链接和动态链接
  - 静态链接: 直接把外部的库的目标代码拷贝到最终构建的可执行程序中
  - 动态链接: 在runtime阶段找到进程的虚地址，最后找到相应的函数代码